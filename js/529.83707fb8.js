"use strict";(self["webpackChunkt"]=self["webpackChunkt"]||[]).push([[529],{3529:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shop-car"},[s("topNav",[s("p",{attrs:{slot:"center"},slot:"center"},[t._v("购物车("+t._s(t.carLength)+")")])]),s("MyScroll",{ref:"scroll",staticClass:"wrap",attrs:{probeType:3}},t._l(t.carList,(function(e,c){return s("div",{key:c,staticClass:"car-item"},[s("div",{staticClass:"row_flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(s){var c=e.checked,o=s.target,a=!!o.checked;if(Array.isArray(c)){var i=null,l=t._i(c,i);o.checked?l<0&&t.$set(e,"checked",c.concat([i])):l>-1&&t.$set(e,"checked",c.slice(0,l).concat(c.slice(l+1)))}else t.$set(e,"checked",a)}}}),s("img",{attrs:{src:e.img}}),s("div",{staticClass:"car-left"},[s("p",[s("strong",{on:{click:function(s){return t.toDetail(e.iid)}}},[t._v(t._s(e.title))])]),s("span",[t._v(t._s(e.desc)+" ")]),s("p",[s("span",{staticClass:"car-price"},[t._v("￥"+t._s(e.newPrice))]),s("span",{staticClass:"car-number"},[s("input",{attrs:{type:"button",value:"-"},on:{click:function(s){return t.less(e)}}}),s("span",{on:{click:function(s){return t.showMask(e)}}},[t._v(" "+t._s("x"+e.count)+" ")]),s("input",{attrs:{type:"button",value:"+"},on:{click:function(s){return t.add_counter(e)}}})])])])])])})),0),s("div",{staticClass:"carCount row_flex"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isCheckAll,expression:"isCheckAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isCheckAll)?t._i(t.isCheckAll,null)>-1:t.isCheckAll},on:{click:t.checkAll,change:function(e){var s=t.isCheckAll,c=e.target,o=!!c.checked;if(Array.isArray(s)){var a=null,i=t._i(s,a);c.checked?i<0&&(t.isCheckAll=s.concat([a])):i>-1&&(t.isCheckAll=s.slice(0,i).concat(s.slice(i+1)))}else t.isCheckAll=o}}}),t._v(" 全选 ")]),s("div",{staticClass:"count-right"},[s("span",[s("p",[t._v(" 选中"+t._s(t.totalCount)+"件，合计："),s("strong",[t._v(t._s(t.totalPrice))])]),s("p",{staticClass:"delete",on:{click:t.deleteItem}},[t._v("删除")])])]),s("button",{staticClass:"car-total"},[t._v("结算")])]),s("MyDialog",{staticClass:"my-dialog",attrs:{showItem:t.showItem},on:{"on-close":t.dialogHide}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("商品数量")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.myItem.count,expression:"myItem.count"}],attrs:{slot:"main",type:"text",maxlength:"3"},domProps:{value:t.myItem.count},on:{input:[function(e){e.target.composing||t.$set(t.myItem,"count",e.target.value)},function(e){t.myItem.count=t.myItem.count.toString().replace(/[^\d]/g,"")}]},slot:"main"}),s("button",{attrs:{slot:"cancel"},on:{click:function(e){return t.dialogHide(!1)}},slot:"cancel"},[t._v("取消")]),s("button",{attrs:{slot:"confirm"},on:{click:function(e){return t.dialogHide(!0)}},slot:"confirm"},[t._v("确定")])])],1)},o=[],a=s(8973),i=s(1882),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showItem,expression:"showItem"}],staticClass:"my-dialog",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"dialog-cover back",on:{click:t.closeSelf}}),s("transition",{attrs:{name:"trop"}},[s("div",{staticClass:"dialog-content"},[s("div",{staticClass:"dialog_head back"},[t._t("header")],2),s("div",{staticClass:"dialog_main"},[t._t("main")],2),s("div",{staticClass:"foot_close"},[t._t("confirm"),t._t("cancel")],2)])])],1)},n=[],r={name:"MyDialog",props:{showItem:{type:Boolean,default:!1,require:!0}},methods:{closeSelf(){this.$emit("on-close",!1)}}},h=r,d=s(1001),u=(0,d.Z)(h,l,n,!1,null,"4cee054a",null),m=u.exports,k=s(4665),p={name:"shopCar",data(){return{showItem:!1,myItem:{}}},components:{topNav:a.Z,MyScroll:i.Z,MyDialog:m},computed:{...(0,k.Se)(["carLength","carList","totalPrice","totalCount"]),isCheckAll:{set(t){this.checkAll(t)},get(){const t=this.carList.reduce(((t,e)=>t+(e.checked?1:0)),0);return t===this.carLength&&this.carLength>0}}},methods:{...(0,k.OI)(["add_counter","less_counter"]),showMask(t){this.showItem=!0,this.myItem.iid=t.iid,this.myItem.count=t.count,this.error_msg=!1},dialogHide(t){t?this.myItem.count?(this.$store.commit("change_Count",this.myItem),this.showItem=!1):this.showItem=!0:this.showItem=!1},less(t){t.count<=1?this.$toast.show("不能再减少了"):this.less_counter(t)},deleteItem(){const t=this.totalCount;let e=confirm("确定删除这"+t+"件商品吗？");e&&this.$store.dispatch("deleteItem").then((t=>this.$toast.show(t)))},isChecked(t){t.checked=!t.checked},checkAll(t){this.carList.forEach((e=>e.checked=t))},toDetail(t){this.$router.push({path:"/toMall/goodDetail",query:{iid:t}})}},mounted(){},activated(){this.$refs.scroll.refresh(),console.log("组件被激活")},beforeDestroy(){}},v=p,_=(0,d.Z)(v,c,o,!1,null,"3a6a49c0",null),f=_.exports}}]);
//# sourceMappingURL=529.83707fb8.js.map