(self["webpackChunkt"]=self["webpackChunkt"]||[]).push([[887],{887:function(t,e,c){"use strict";c.r(e),c.d(e,{default:function(){return C}});var s=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"shop-car"},[c("topNav",[c("p",{attrs:{slot:"center"},slot:"center"},[t._v("购物车("+t._s(t.carLength)+")")])]),c("MyScroll",{ref:"scroll",staticClass:"wrap",attrs:{probeType:3}},t._l(t.carList,(function(e,s){return c("div",{key:s,staticClass:"car-item"},[c("div",{staticClass:"row_flex"},[c("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(c){var s=e.checked,n=c.target,o=!!n.checked;if(Array.isArray(s)){var i=null,r=t._i(s,i);n.checked?r<0&&t.$set(e,"checked",s.concat([i])):r>-1&&t.$set(e,"checked",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"checked",o)}}}),c("img",{attrs:{src:e.img}}),c("div",{staticClass:"car-left"},[c("p",[c("strong",{on:{click:function(c){return t.toDetail(e.iid)}}},[t._v(t._s(e.title))])]),c("span",[t._v(t._s(e.desc)+" ")]),c("p",[c("span",{staticClass:"car-price"},[t._v("￥"+t._s(e.newPrice))]),c("span",{staticClass:"car-number"},[c("input",{attrs:{type:"button",value:"-"},on:{click:function(c){return t.less(e)}}}),c("span",{on:{click:function(c){return t.showMask(e)}}},[t._v(" "+t._s("x"+e.count)+" ")]),c("input",{attrs:{type:"button",value:"+"},on:{click:function(c){return t.add_counter(e)}}})])])])])])})),0),c("div",{staticClass:"carCount row_flex"},[c("label",[c("input",{directives:[{name:"model",rawName:"v-model",value:t.isCheckAll,expression:"isCheckAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isCheckAll)?t._i(t.isCheckAll,null)>-1:t.isCheckAll},on:{click:t.checkAll,change:function(e){var c=t.isCheckAll,s=e.target,n=!!s.checked;if(Array.isArray(c)){var o=null,i=t._i(c,o);s.checked?i<0&&(t.isCheckAll=c.concat([o])):i>-1&&(t.isCheckAll=c.slice(0,i).concat(c.slice(i+1)))}else t.isCheckAll=n}}}),t._v(" 全选 ")]),c("div",{staticClass:"count-right"},[c("span",[c("p",[t._v(" 选中"+t._s(t.totalCount)+"件，合计："),c("strong",[t._v(t._s(t.totalPrice))])]),c("p",{staticClass:"delete",on:{click:t.deleteItem}},[t._v("删除")])])]),c("button",{staticClass:"car-total"},[t._v("结算")])]),c("MyDialog",{staticClass:"my-dialog",attrs:{showItem:t.showItem},on:{"on-close":t.dialogHide}},[c("div",{attrs:{slot:"header"},slot:"header"},[t._v("商品数量")]),c("input",{directives:[{name:"model",rawName:"v-model",value:t.myItem.count,expression:"myItem.count"}],attrs:{slot:"main",type:"text",maxlength:"3"},domProps:{value:t.myItem.count},on:{input:[function(e){e.target.composing||t.$set(t.myItem,"count",e.target.value)},function(e){t.myItem.count=t.myItem.count.toString().replace(/[^\d]/g,"")}]},slot:"main"}),c("button",{attrs:{slot:"cancel"},on:{click:function(e){return t.dialogHide(!1)}},slot:"cancel"},[t._v("取消")]),c("button",{attrs:{slot:"confirm"},on:{click:function(e){return t.dialogHide(!0)}},slot:"confirm"},[t._v("确定")])])],1)},n=[];c(7941),c(2526),c(7327),c(1539),c(5003),c(4747),c(9337);function o(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function i(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,s)}return c}function r(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?i(Object(c),!0).forEach((function(e){o(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):i(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}var a=c(8973),l=c(1882),u=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{directives:[{name:"show",rawName:"v-show",value:t.showItem,expression:"showItem"}],staticClass:"my-dialog",on:{click:function(t){t.stopPropagation()}}},[c("div",{staticClass:"dialog-cover back",on:{click:t.closeSelf}}),c("transition",{attrs:{name:"trop"}},[c("div",{staticClass:"dialog-content"},[c("div",{staticClass:"dialog_head back"},[t._t("header")],2),c("div",{staticClass:"dialog_main"},[t._t("main")],2),c("div",{staticClass:"foot_close"},[t._t("confirm"),t._t("cancel")],2)])])],1)},h=[],d={name:"MyDialog",props:{showItem:{type:Boolean,default:!1,require:!0}},methods:{closeSelf:function(){this.$emit("on-close",!1)}}},m=d,f=c(1001),p=(0,f.Z)(m,u,h,!1,null,"4cee054a",null),v=p.exports,k=c(4665),g={name:"shopCar",data:function(){return{showItem:!1,myItem:{}}},components:{topNav:a.Z,MyScroll:l.Z,MyDialog:v},computed:r(r({},(0,k.Se)(["carLength","carList","totalPrice","totalCount"])),{},{isCheckAll:{set:function(t){this.checkAll(t)},get:function(){var t=this.carList.reduce((function(t,e){return t+(e.checked?1:0)}),0);return t===this.carLength&&this.carLength>0}}}),methods:r(r({},(0,k.OI)(["add_counter","less_counter"])),{},{showMask:function(t){this.showItem=!0,this.myItem.iid=t.iid,this.myItem.count=t.count,this.error_msg=!1},dialogHide:function(t){t?this.myItem.count?(this.$store.commit("change_Count",this.myItem),this.showItem=!1):this.showItem=!0:this.showItem=!1},less:function(t){t.count<=1?this.$toast.show("不能再减少了"):this.less_counter(t)},deleteItem:function(){var t=this,e=this.totalCount,c=confirm("确定删除这"+e+"件商品吗？");c&&this.$store.dispatch("deleteItem").then((function(e){return t.$toast.show(e)}))},isChecked:function(t){t.checked=!t.checked},checkAll:function(t){this.carList.forEach((function(e){return e.checked=t}))},toDetail:function(t){this.$router.push({path:"/toMall/goodDetail",query:{iid:t}})}}),mounted:function(){},activated:function(){this.$refs.scroll.refresh(),console.log("组件被激活")},beforeDestroy:function(){}},y=g,_=(0,f.Z)(y,s,n,!1,null,"3a6a49c0",null),C=_.exports},9337:function(t,e,c){var s=c(2109),n=c(9781),o=c(3887),i=c(5656),r=c(1236),a=c(6135);s({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,c,s=i(t),n=r.f,l=o(s),u={},h=0;while(l.length>h)c=n(s,e=l[h++]),void 0!==c&&a(u,e,c);return u}})}}]);
//# sourceMappingURL=887-legacy.11000979.js.map